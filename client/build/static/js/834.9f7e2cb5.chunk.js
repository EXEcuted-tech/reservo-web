"use strict";(self.webpackChunkreservo_web=self.webpackChunkreservo_web||[]).push([[834],{1834:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(2791),r=n(4165),s=n(7762),c=n(5861),i=n(9439),o=n(1243),l=n(8263),d=n(7692),u=n(184);var x=function(e){var t=(0,a.useState)(0),n=(0,i.Z)(t,2),s=n[0],x=n[1],m=localStorage.getItem("merch_id");(0,a.useEffect)((function(){h(e.year,e.month,e.day),setTimeout((function(){}),50)}),[e.year,e.month,e.day,window.location.pathname]);var h=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(n,a,s){var c,i,d,u,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setIsLoading(!0),t.prev=1,c=window.location.pathname.split("/"),i="%",t.t0=c[2],t.next="upcoming"===t.t0?7:"finished"===t.t0?9:11;break;case 7:return i="Ongoing%",t.abrupt("break",12);case 9:return i="Finished%",t.abrupt("break",12);case 11:return t.abrupt("break",12);case 12:d=String(n),u=String(a+1).padStart(2,"0"),h=String(s).padStart(2,"0"),o.Z.get("".concat(l.Z.API,"/reserve/retrievecountnparams"),{params:{cols:"res_date AS res_date, COUNT(*) as count",condition:"merchant_id = ".concat(m," AND status LIKE '").concat(i,"' AND res_date = '").concat(d,"-").concat(u,"-").concat(h,"' ")}}).then((function(t){x(t.data.data[0].count),e.setIsLoading(!1)})),t.next=20;break;case 18:t.prev=18,t.t1=t.catch(1);case 20:x(-1),e.setIsLoading(!1);case 22:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e,n,a){return t.apply(this,arguments)}}();return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{onClick:function(){e.showReservations()},className:"border-b-slate-950 border-solid d-flex align-items-end justify-content-end",children:[(0,u.jsx)("p",{className:" text-right",children:e.day}),e.isLoading?(0,u.jsx)("p",{className:"text-center",children:"..."}):(0,u.jsx)("div",{className:"flex justify-center duration-200 items-center w-[3vw] h-[3vw] rounded-full ".concat(s>0?"bg-yellow-400 hover:bg-yellow-300":""),children:s>0?(0,u.jsxs)("p",{children:[s,(0,u.jsx)(d.wTD,{})]}):(0,u.jsx)(u.Fragment,{})})]})})},m=n(7425),h=n(1713),f=n(8820),p=n(1545),b=n(5763);var g=function(e){var t=(0,a.useState)(!1),n=(0,i.Z)(t,2),s=n[0],d=n[1],x=(0,a.useState)([]),g=(0,i.Z)(x,2),v=g[0],j=g[1],y=localStorage.getItem("merch_id"),w=window.location.pathname.split("/"),N="%";switch(w[2]){case"upcoming":N="Ongoing%";break;case"finished":N="Finished%"}var S=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t,n,a){var s,c,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=String(t),c=String(n).padStart(2,"0"),i=String(a).padStart(2,"0"),o.Z.get("".concat(l.Z.API,"/reserve/retrievenparams"),{params:{query:"merchant_id = ".concat(y," AND res_date = '").concat(s,"-").concat(c,"-").concat(i,"' AND status LIKE '").concat(N,"' ORDER BY res_time ASC")}}).then((function(e){j(e.data.data)}))}catch(r){}case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){d(!0),e.year&&e.month&&e.day&&S(e.year,e.month,e.day),d(!1)}),[e.year,e.month,e.day]),(0,a.useEffect)((function(){}),[v]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"bg-[rgba(0,0,0,0.6)] w-[100vw] h-[100vh] z-10 absolute top-0 left-0 duration-100 animate-fade-in overflow-hidden",children:(0,u.jsx)("div",{className:"animate-slide-up font-poppins fixed top-[8%] left-[18%] right-0 bg-white z-50 bg-[rgba(0, 0, 0, 0.5)] w-[70%] p-4 overflow-x-hidden overflow-y-auto h-[80%] drop-shadow rounded-3xl",children:s?(0,u.jsx)("div",{className:"flex justify-center mt-[25%]",children:(0,u.jsx)(h.Z,{})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flex w-full h-[5vh]",children:[(0,u.jsxs)("div",{className:"flex items-center w-[96%] mt-[0.5%]",children:[(0,u.jsx)(m.lBz,{className:"text-[2.8em] ml-[1%] mr-[1%] xl:max-2xl:text-[2em]"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"font-bold text-[1.5em] xl:max-2xl:text-[1.2em]",children:"Reservations List"}),(0,u.jsxs)("p",{className:"mt-[-1%] text-[1.2em] xl:max-2xl:text-[0.9em]",children:["Count: ",v.length]})]})]}),(0,u.jsx)("div",{className:"mt-[0.5%]",children:(0,u.jsx)(f.LHV,{className:"text-[2.5em] hover:cursor-pointer xl:max-2xl:text-[1.8em]",onClick:function(){e.close()}})})]}),(0,u.jsx)("hr",{className:"h-[2px] w-full my-[1.2%] bg-gray-200 border-0"}),(0,u.jsxs)("h1",{className:"font-bold uppercase text-[1.5em] ml-[2%] bg-[#840705] inline-block text-white px-[1%] rounded-lg mb-[0.5%] xl:max-2xl:text-[1.0em]",children:["As of: ",["NULL","Mon","Tue","Wed","Thu","Fri","Sat","Sun"][e.day%7]," - ",["NULL","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.month],"/",e.day,"/",e.year]}),(0,u.jsxs)("div",{className:"flex mx-[2%] py-[2%] text-[1.2em] xl:max-2xl:text-[0.8em]",children:[(0,u.jsxs)("table",{className:"w-[100%] table-fixed",children:[(0,u.jsxs)("thead",{className:"",children:[(0,u.jsx)("th",{className:"font-bold uppercase text-[1.0em] m1-[4%] px-[1%] mt-[2%] rounded-lg mb-[0.5%] xl:max-2xl:text-[1.3em]",children:"Reservation ID"}),(0,u.jsx)("th",{className:"font-bold uppercase text-[1.0em] ml-[4%] px-[1%] mt-[2%]  rounded-lg mb-[0.5%] xl:max-2xl:text-[1.3em]",children:"Client ID"}),(0,u.jsx)("th",{className:"font-bold uppercase text-[1.0em] ml-[4%] mt-[2%] rounded-lg mb-[0.5%] xl:max-2xl:text-[1.3em]",children:"Time"}),(0,u.jsx)("th",{className:"font-bold uppercase text-[1.0em] ml-[4%] mt-[2%] rounded-lg mb-[0.5%] xl:max-2xl:text-[1.3em]",children:"Status"}),(0,u.jsx)("th",{className:"font-bold uppercase text-[1.0em] ml-[4%] mt-[2%] rounded-lg mb-[0.5%] xl:max-2xl:text-[1.3em]",children:"Actions"})]}),(0,u.jsx)("tbody",{className:" scroll-auto",children:s?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h.Z,{})}):(0,u.jsx)(u.Fragment,{children:v.length>0?(0,u.jsx)(u.Fragment,{children:v.map((function(t,n){return(0,u.jsxs)("tr",{className:"mt-4 py-4 border-t-2 border-b-2 border-black border-solid",children:[(0,u.jsx)("td",{className:"text-center text-[0.8em]",children:t.reservation_id}),(0,u.jsx)("td",{className:"text-center text-[0.8em]",children:t.account_id}),(0,u.jsx)("td",{className:"text-center  text-[0.8em]",children:t.res_time}),(0,u.jsx)("td",{className:"text-center text-[0.8em] font-bold ".concat("Finished"===t.status?"text-green-800":" text-blue-800"),children:(0,u.jsx)("button",{className:"".concat("Finished"===t.status?"bg-green-200":" bg-blue-200"," w-[50%] rounded-xl"),children:t.status})}),(0,u.jsxs)("td",{className:"flex flex-col items-center justify-center space-y-2 text-[0.8em] py-4",children:[(0,u.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,u.jsxs)("button",{className:"flex justify-center items-center w-[80%] bg-[#ffbb38] py-[3%] px-[15%] rounded-3xl xl:max-2xl:text-[0.9em] xl:max-2xl:mb-[3%]",onClick:function(){sessionStorage.setItem("res_id",t.reservation_id),e.openView(!0)},children:[(0,u.jsx)(p.nhM,{className:"mr-[0.3rem]"}),"View"]})}),(0,u.jsx)("div",{className:"w-full flex justify-center items-center text-[0.8em]",children:(0,u.jsxs)("button",{className:"flex justify-center items-center w-[80%] bg-[#ff8e4f] py-[3%] px-[18%] rounded-3xl xl:max-2xl:text-[0.9em] xl:max-2xl:mb-[7%] xl:max-2xl:px-[19%]",onClick:function(){sessionStorage.setItem("res_id",t.reservation_id),e.openEdit(!0)},children:[(0,u.jsx)(b.LBv,{className:"ml-[-0.5rem] mr-[0.4rem]"}),"Edit"]})})]})]},n)}))}):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"text-center",colSpan:5,children:"Nothing to show for now."})})})})]}),(0,u.jsx)("p",{})]})]})})})})},v=n(5864),j=n(684),y=n(6053);var w=function(){var e=(0,a.useState)(!1),t=(0,i.Z)(e,2),n=t[0],d=t[1],m=(0,a.useState)(1),h=(0,i.Z)(m,2),f=(h[0],h[1]),p=(0,a.useState)(!1),b=(0,i.Z)(p,2),w=b[0],N=b[1],S=(0,a.useState)(!1),Z=(0,i.Z)(S,2),k=Z[0],D=Z[1],_=(0,a.useState)({day:1,month:1,year:2e3,count:0}),F=(0,i.Z)(_,2),A=F[0],I=F[1],L=(0,a.useState)((new Date).getFullYear()),E=(0,i.Z)(L,2),C=E[0],M=E[1],O=(0,a.useState)((new Date).getMonth()),T=(0,i.Z)(O,2),U=T[0],R=T[1],J=localStorage.getItem("merch_id"),Y=(0,a.useState)(),K=(0,i.Z)(Y,2),P=(K[0],K[1]),V=(0,a.useState)(""),z=(0,i.Z)(V,2),B=(z[0],z[1]),W=(0,a.useState)(""),q=(0,i.Z)(W,2),G=(q[0],q[1]),H=(0,a.useState)({}),Q=(0,i.Z)(H,2),X=(Q[0],Q[1]),$=new Date,ee=function(e,t){return new Date(e,t,1).getDay()},te=(0,a.useState)(!1),ne=(0,i.Z)(te,2),ae=ne[0],re=ne[1],se=function(){re(!1===ae)},ce=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ie=(0,a.useState)(function(e,t){return new Date(e,t+1,0).getDate()}(C,U)),oe=(0,i.Z)(ie,2),le=(oe[0],oe[1],(0,a.useState)(new Date(C,U,1).getDay())),de=(0,i.Z)(le,2),ue=(de[0],de[1],function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var t,n,a,c,i,d,u,x,m,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=String(C),n=String(U+1).padStart(2,"0"),a=window.location.pathname.split("/"),c="%",e.t0=a[2],e.next="upcoming"===e.t0?8:"finished"===e.t0?10:12;break;case 8:return c="Ongoing%",e.abrupt("break",13);case 10:return c="Finished%",e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:return e.next=15,o.Z.get("".concat(l.Z.API,"/reserve/retrievecountnparams"),{params:{cols:"res_date as res_date, COUNT(*) as count",condition:"merchant_id = ".concat(J," AND res_date LIKE '").concat(t,"-").concat(n,"-%' AND status LIKE '").concat(c,"' GROUP BY res_date")}});case 15:i=e.sent,d={},u=(0,s.Z)(i.data.data);try{for(u.s();!(x=u.n()).done;)m=x.value,i.data.data.length>0&&(h=m.res_date,f=m.count,d[h]=f)}catch(r){u.e(r)}finally{u.f()}X(d),P(d.tempData),e.next=27;break;case 23:e.prev=23,e.t1=e.catch(0),G("Server Error"),B(e.t1.body);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}()),xe=function(e){"next"===e?11===U?(M(C+1),R(0)):R(U+1):0===U?(M(C-1),R(11)):R(U-1)};(0,a.useEffect)((function(){d(!0),ue().then((function(){d(!1)})).catch((function(e){d(!1)}));var e=new Date;fe(e.getFullYear()===C&&e.getMonth()===U&&1===e.getDate())}),[C,U]);var me=(0,a.useState)(!1),he=(0,i.Z)(me,2),fe=(he[0],he[1]);(0,a.useEffect)((function(){$.getFullYear()===C&&$.getMonth()===U&&1===$.getDate()?fe(!0):fe(!1)}),[1]),(0,a.useEffect)((function(){d(!0),ue().then((function(){d(!1)})).catch((function(e){d(!1)}))}),[C,U,window.location.pathname]);var pe=function(e){return e===$.getDate()&&C===$.getFullYear()&&U===$.getMonth()},be=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t,n,a){var s,c,i,u,x,m,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=-1,d(!0),e.prev=2,c=window.location.pathname.split("/"),i="%",e.t0=c[2],e.next="upcoming"===e.t0?8:"finished"===e.t0?10:12;break;case 8:return i="Ongoing%",e.abrupt("break",13);case 10:return i="Finished%",e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:u=String(t),x=String(n+1).padStart(2,"0"),m=String(a).padStart(2,"0"),o.Z.get("".concat(l.Z.API,"/reserve/retrievecountnparams"),{params:{cols:"res_date AS res_date, COUNT(*) as count",condition:"merchant_id = ".concat(J," AND status LIKE '").concat(i,"' AND res_date = '").concat(u,"-").concat(x,"-").concat(m,"' ")}}).then((function(e){s=e.data.data[0].count})),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(2),G("Server Error"),B(e.t1.message);case 23:h={year:t,month:n+1,day:a,count:Number(s)},I(h),d(!1);case 26:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n,a){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{className:"flex flex-col font-poppins w-[100%] h-[100%] p-[1%] bg-red-200",children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"grid grid-cols-7 my-[1%]",children:[(0,u.jsx)("div",{}),(0,u.jsx)("div",{}),(0,u.jsx)("div",{className:"flex justify-center items-center",children:(0,u.jsxs)("button",{onClick:function(e){e.preventDefault(),xe("back")},className:"w-[2vw] h-[2vw] border-solid border-black border-2 flex justify-center items-center rounded-full duration-100 hover:border-[rgba(0,0,0,0.5)] ",children:[" ",(0,u.jsx)(y.Ugn,{})]})}),(0,u.jsxs)("div",{className:"flex justify-center items-center text-[1.5rem] font-bold",children:[(0,u.jsx)("span",{children:["January","Febuary","March","April","May","June","July","August","September","October","November","December"][U]}),(0,u.jsx)("p",{children:" - "}),(0,u.jsx)("span",{children:String(C)})]}),(0,u.jsx)("div",{className:"flex justify-center items-center",children:(0,u.jsxs)("button",{onClick:function(e){e.preventDefault(),xe("next")},className:"w-[2vw] h-[2vw] border-solid border-black border-2 flex justify-center items-center rounded-full duration-100 hover:border-[rgba(0,0,0,0.5)]",children:[" ",(0,u.jsx)(y.ULj,{})]})}),(0,u.jsx)("div",{}),(0,u.jsx)("div",{})]}),(0,u.jsxs)("div",{className:"grid grid-cols-7 gap-4 mx-5",children:[Array.from({length:7}).map((function(e,t){var n=(t+1)%7;return(0,u.jsx)("span",{className:"text-center font-poppins",children:ce[n]},t)})),Array.from({length:ee(C,U)}).map((function(e,t){return(0,u.jsx)("div",{},t)})),Array.from({length:ee(C,U)}).map((function(e,t){return(0,u.jsx)("div",{},t)})),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31].map((function(e){return(0,u.jsx)("div",{className:"h-[12vh] w-[10vw] cursor-pointer p-2 rounded-xl border-black border-2 border-solid ".concat(!0===pe(e)?" bg-[#f9dcc5]":"bg-[#FFFFFF]"," hover:bg-slate-300 duration-300"),onClick:function(){return function(e){f(e)}(e)},children:(0,u.jsx)("div",{onClick:function(){return be(C,U,e)},children:(0,u.jsx)(x,{showReservations:se,year:C,day:e,month:U,today:pe(e),setIsLoading:d,isLoading:n})})},e)})),ae?(0,u.jsx)(g,{year:A.year,month:A.month,day:A.day,count:A.count,close:se,openView:N,openEdit:D}):(0,u.jsx)(u.Fragment,{}),(w||k)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-[rgb(0,0,0,0.5)] opacity-0.5 z-100"}),w&&(0,u.jsx)(v.Z,{setOpenModalView:N}),k&&(0,u.jsx)(j.Z,{setOpenModalEdit:D})]})]})]})})},N=function(){return(0,u.jsx)("div",{className:"animate-fade-in overflow-y-auto",children:(0,u.jsx)(w,{})})}}}]);
//# sourceMappingURL=834.9f7e2cb5.chunk.js.map